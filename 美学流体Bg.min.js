class Color4Bg {
    static get 美学流体Bg() {
        return class {
            constructor(options) {
                if (!options.dom) {
                    throw new Error("dom is required");
                }
                this.dom = document.getElementById(options.dom);
                this.colors = options.colors || ["#00f2fe", "#4facfe", "#00f2fe"];
                this.loop = options.loop !== false;
                this.init();
            }

            init() {
                const canvas = document.createElement("canvas");
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                const ctx = canvas.getContext("2d");
                this.dom.appendChild(canvas);
                this.canvas = canvas;
                this.ctx = ctx;
                this.circles = [];
                this.createCircles();
                this.animate();
            }

            createCircles() {
                for (let i = 0; i < 15; i++) {
                    const circle = {
                        x: Math.random() * this.canvas.width,
                        y: Math.random() * this.canvas.height,
                        radius: Math.random() * 150 + 50,
                        speed: Math.random() * 0.5 + 0.1,
                        angle: Math.random() * Math.PI * 2,
                        color: this.colors[Math.floor(Math.random() * this.colors.length)]
                    };
                    this.circles.push(circle);
                }
            }

            animate() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.circles.forEach((circle, index) => {
                    circle.x += Math.cos(circle.angle) * circle.speed;
                    circle.y += Math.sin(circle.angle) * circle.speed;
                    
                    if (circle.x <= -circle.radius) circle.x = this.canvas.width + circle.radius;
                    if (circle.x >= this.canvas.width + circle.radius) circle.x = -circle.radius;
                    if (circle.y <= -circle.radius) circle.y = this.canvas.height + circle.radius;
                    if (circle.y >= this.canvas.height + circle.radius) circle.y = -circle.radius;

                    const gradient = this.ctx.createRadialGradient(
                        circle.x, circle.y, 0,
                        circle.x, circle.y, circle.radius
                    );
                    gradient.addColorStop(0, circle.color + "80");
                    gradient.addColorStop(1, circle.color + "00");

                    this.ctx.fillStyle = gradient;
                    this.ctx.beginPath();
                    this.ctx.arc(circle.x, circle.y, circle.radius, 0, Math.PI * 2);
                    this.ctx.fill();
                    this.ctx.closePath();
                });

                if (this.loop) {
                    requestAnimationFrame(this.animate.bind(this));
                }
            }
        };
    }
}

if (typeof module !== 'undefined' && module.exports) {
    module.exports = Color4Bg;
}
if (typeof window !== 'undefined') {
    window.Color4Bg = Color4Bg;
}